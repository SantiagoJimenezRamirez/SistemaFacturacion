<div class="flex max-w-screen">
  <div class="h-full w-[8vh] hidden lg:block">
    <app-menu></app-menu>
  </div>
  <div class="w-full h-screen">
    <app-header></app-header>
    <div class="flex flex-col justify-start h-[92%]">
      <div class=" h-[50%] bg-[#a2d2ff] overflow-x-auto w-full md:hidden">
        <div class="m-1 bg-slate-700 h-full">
          <!-- Recorremos el array selected con *ngFor -->
          <div *ngFor="let order of selected; let i = index"
            class="p-2 m-2 bg-white rounded flex justify-between shadow-md text-black">
            <div>
              <!-- Mostramos el nombre del producto -->
              <h2 class="text-lg font-bold">{{ order.nameProduct }}</h2>
              <!-- Mostramos la cantidad de unidades -->
              <p><b>Un:</b> {{ order.unitis }}</p>
              <!-- Mostramos el precio -->
              <p><b>$</b> {{ getFormattedCount(order.price) }}</p>
            </div>
            <div class="relative flex flex-col w-auto h-auto">
              <!-- Botón para editar -->
              <div class="absolute top-0 right-0 rounded-full flex justify-center items-center w-8 h-8 border border-black"
                (click)="editProduct(i)">
                <img src="svg/pencil.svg" alt="">
              </div>
            
              <!-- Botón para eliminar -->
              <div class="absolute bottom-0 right-0 rounded-full flex justify-center items-center w-8 h-8 border border-black"
                (click)="deleteProduct(i)">
                <img src="svg/delete.svg" alt="">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="h-[100%] flex bg-zinc-800 w-full overflow-hidden">
        <div class="w-full h-full ">
          <div class="flex justify-center w-full h-[10%] bg-white overflow-x-auto">
            <div *ngFor="let category of categories"
              class="flex justify-center items-center w-full text-center shadow-xl cursor-pointer"
              (click)="bringProducts(category.name)">
              {{category.name}}
            </div>
          </div>

          <div class="w-full h-[92%] bg-emerald-400 flex flex-col">
            <!-- Contenedor de arriba -->
            <div class="flex-1 bg-[#edede9] flex justify-center flex-wrap overflow-y-auto ">
              <app-card-product class="w-full contents" [filteredProducts]="filteredProducts"
                (productSelected)="onProductSelected($event)">
              </app-card-product>
            </div>

            <button
              class="fixed bottom-4 right-4 w-16 h-16 rounded-full bg-[#219ebc] border border-black text-white flex items-center justify-center transition duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-400"
              (click)="submitOrders()" [disabled]="selected.length === 0">
              <!-- Logo en lugar del texto del botón -->
              <img src="svg/submit.svg" alt="Logo" class="w-8 h-8">
            </button>


            <!-- Contenedor del formulario -->
            <div *ngIf="isVisible" class="w-full flex-none bg-slate-50 md:hidden">
              <form [formGroup]="productForm" (ngSubmit)="discountForm()" class="w-full h-auto p-4">
                <p class="pb-0">{{ productSelected() }}</p>
                <div class="flex flex-wrap justify-between items-start w-full pb-4">
                  <div class="flex-1 min-w-[150px] p-2">
                    <h1 class="p-2">Units</h1>
                    <input type="number" formControlName="units" class="w-full p-2 border rounded">
                  </div>
                  <div class="flex-1 min-w-[150px] p-2">
                    <h1 class="p-2">Discount</h1>
                    <input type="number" formControlName="discount" class="w-full p-2 border rounded">
                  </div>
                  <div class="flex-1 min-w-[150px] p-2">
                    <h1 class="p-2">Comment</h1>
                    <input type="text" formControlName="comment" class="w-full p-2 border rounded">
                  </div>
                </div>
                <div class="flex w-full justify-center items-center py-4">
                  <button type="submit" class="px-3 p-1 border border-black">Submit</button>
                </div>
              </form>
            </div>
          </div>


        </div>
        <div class="w-2/6 h-full bg-[#edf2f4] hidden md:block" *ngIf="isVisible">

          <div class="w-full h-[40%] overflow-y-auto text-justify">
            <h1 class="text-[#001d3d] text-2xl"><b>Productos Elegidos</b></h1>
            <div class="m-1 bg-slate-700 h-full">
              <!-- Recorremos el array selected con *ngFor -->
              <div *ngFor="let order of selected; let i = index"
                class="p-2 m-2 bg-white rounded flex justify-between shadow-md text-black">
                <div>
                  <!-- Mostramos el nombre del producto -->
                  <h2 class="text-lg font-bold">{{ order.nameProduct }}</h2>
                  <!-- Mostramos la cantidad de unidades -->
                  <p><b>Un:</b> {{ order.unitis }}</p>
                  <!-- Mostramos el precio -->
                  <p><b>$</b> {{ getFormattedCount(order.price) }}</p>
                </div>
                <div class="relative flex flex-col w-auto h-auto">
                  <!-- Botón para editar -->
                  <div class="absolute top-0 right-0 rounded-full flex justify-center items-center w-8 h-8 border border-black"
                    (click)="editProduct(i)">
                    <img src="svg/pencil.svg" alt="">
                  </div>
                
                  <!-- Botón para eliminar -->
                  <div class="absolute bottom-0 right-0 rounded-full flex justify-center items-center w-8 h-8 border border-black"
                    (click)="deleteProduct(i)">
                    <img src="svg/delete.svg" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div>
          

          <div class="flex flex-col justify-start w-full h-[60%] text-center overflow-y-auto">
            <h1 class="text-[#001d3d] text-2xl"><b>Detalles del pedido</b></h1>
            <form [formGroup]="productForm" (ngSubmit)="discountForm()" class="w-full h-auto p-4">
              <p class="pb-0">{{ productSelected() }}</p>
              <div class="flex flex-wrap justify-between items-start w-full pb-4">
                <div class="flex-1 min-w-[150px] p-2">
                  <h1 class="p-2">Units</h1>
                  <input type="number" formControlName="units" class="w-full p-2 border rounded">
                </div>
                <div class="flex-1 min-w-[150px] p-2">
                  <h1 class="p-2">Discount</h1>
                  <input type="number" formControlName="discount" class="w-full p-2 border rounded">
                </div>
                <div class="flex-1 min-w-[150px] p-2">
                  <h1 class="p-2">Comment</h1>
                  <input type="text" formControlName="comment" class="w-full p-2 border rounded">
                </div>
              </div>
              <div class="flex w-full justify-center items-center py-4">
                <button type="submit" class="px-3 p-1 border border-black">Add Product</button>
              </div>
            </form>
          </div>
        </div>

      </div>

    </div>
  </div>
</div>